<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIT AI Assistant</title>
    <style>
      /* --- START: Added styles for the page and variables --- */
      :root {
        --primary-blue: #005A9C; /* A corporate blue for the header */
        --secondary-blue: #2563EB; /* A brighter blue for interaction */
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: #e9f5ff;
        margin: 0;
        padding: 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        box-sizing: border-box;
      }
      .main-content {
        text-align: center;
        color: #333;
      }
      h1 {
        color: var(--primary-blue);
      }
      /* --- END: Added styles --- */

      /* Your Provided CSS */
      #sit-chatbot {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 320px;
        max-width: 90%;
        z-index: 9999;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.25);
        overflow: hidden;
        font-family: sans-serif;
      }
      #sit-chat-header {
        background: var(--primary-blue);
        color: white;
        padding: 10px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      #sit-chat-toggle-theme {
        background: transparent;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 1.2rem;
      }
      #sit-chat-body {
        display: none;
        background: #f0f8ff;
        max-height: 400px;
        overflow-y: auto;
        padding: 10px;
      }
      #sit-chat-messages div {
        margin-bottom: 10px;
        display: flex;
        gap: 8px;
        align-items: flex-start;
      }
      .msg-user {
        justify-content: flex-end;
      }
      .msg-bubble {
        max-width: 75%;
        padding: 8px 12px;
        border-radius: 12px;
        line-height: 1.4;
      }
      .msg-user .msg-bubble {
        background: var(--secondary-blue);
        color: white;
        border-radius: 12px 12px 0 12px;
      }
      .msg-ai .msg-bubble {
        background: #e0e7ff;
        color: #1f2937;
        border-radius: 12px 12px 12px 0;
      }
      .avatar {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: #ccc; /* Fallback color */
      }
      .quick-btn {
        background: #2563EB;
        color: white;
        border: none;
        padding: 5px 10px;
        margin: 2px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 12px;
        transition: background-color 0.3s;
      }
      .quick-btn:hover {
        background: #1E40AF;
      }
      #sit-chat-input {
        flex: 1;
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ccc;
      }
      #sit-chat-send {
        background: var(--secondary-blue);
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
      }

      /* Dark Mode Styles */
      .dark-mode {
        background: #1f2937;
        color: white;
      }
      .dark-mode #sit-chat-body {
        background: #111827;
      }
      .dark-mode .msg-ai .msg-bubble {
        background: #374151;
        color: white;
      }
      .dark-mode .msg-user .msg-bubble {
        background: #2563EB;
        color: white;
      }
    </style>
</head>
<body>

    <div class="main-content">
        <h1>Welcome to the SIT Demo Page</h1>
        <p>Click the chat icon on the bottom right to talk to the AI Assistant.</p>
    </div>

    <div id="sit-chatbot">
      <div id="sit-chat-header">
        <span>SIT AI Assistant</span>
        <button id="sit-chat-toggle-theme">üåô</button>
      </div>
      <div id="sit-chat-body">
        <div id="sit-chat-messages">
          <div class="msg-ai">
            <img class="avatar" src="https://placehold.co/30x30/005A9C/FFFFFF?text=AI" alt="AI Avatar">
            <div class="msg-bubble">Hi there! How can I help you with SIT today?</div>
          </div>
        </div>
        <div id="sit-quick-replies" style="margin:10px 0;">
          <button class="quick-btn" data-msg="About SIT">About SIT</button>
          <button class="quick-btn" data-msg="Admission details">Admission</button>
          <button class="quick-btn" data-msg="Departments offered">Departments</button>
          <button class="quick-btn" data-msg="Placement info">Placements</button>
          <button class="quick-btn" data-msg="Contact info">Contact</button>
        </div>
        <div style="display:flex; gap:5px;">
          <input id="sit-chat-input" type="text" placeholder="Type a message..." style="flex:1; padding:8px; border-radius:5px; border:1px solid #ccc;">
          <button id="sit-chat-send">Send</button>
        </div>
      </div>
    </div>

    <script>
    const chatHeader = document.getElementById('sit-chat-header');
    const chatBody = document.getElementById('sit-chat-body');
    const chatMessages = document.getElementById('sit-chat-messages');
    const chatInput = document.getElementById('sit-chat-input');
    const chatSend = document.getElementById('sit-chat-send');
    const quickBtns = document.querySelectorAll('.quick-btn');
    const themeBtn = document.getElementById('sit-chat-toggle-theme');
    const chatbotContainer = document.getElementById('sit-chatbot');

    // Toggle chat open/close
    chatHeader.addEventListener('click', (event) => {
      // Don't close the chat if the theme button was clicked
      if (event.target === themeBtn) return;
      
      const isDisplayed = chatBody.style.display === 'block';
      chatBody.style.display = isDisplayed ? 'none' : 'block';
      
      // If we are opening the chat, scroll to the bottom
      if (!isDisplayed) {
          chatMessages.scrollTop = chatMessages.scrollHeight;
      }
    });

    // Toggle dark/light theme
    themeBtn.addEventListener('click', (event) => {
      event.stopPropagation(); // Prevents the header click event from firing
      chatbotContainer.classList.toggle('dark-mode');
      themeBtn.textContent = chatbotContainer.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
    });

    // Predefined AI responses
    function getAIResponse(msg) {
      const m = msg.toLowerCase();
      if (m.includes('about')) return "SIT is Seshasayee Institute of Technology, Trichy, established in 1952. It is a government-aided institution renowned for providing quality technical education and fostering innovation.";
      if (m.includes('admission')) return "For detailed admission information, including courses, fees, eligibility criteria, and the online application process, please visit the official admissions page on the SIT website.";
      if (m.includes('department')) return "SIT offers diploma programs in several engineering disciplines: Computer Science (CSE), Instrumentation & Control (ICE), Mechanical, Civil, Electrical & Electronics (EEE), Paper Technology, and Chemical Engineering.";
      if (m.includes('placement')) return "SIT has a dedicated placement cell with strong industry connections, resulting in excellent placement records year after year. Top companies recruit from our campus.";
      if (m.includes('contact')) return "You can find us at: Thanjore Main Road, Ariyamangalam, Trichy-620010, Tamil Nadu, India. For direct inquiries, please check the official website for the latest phone number.";
      return "I'm sorry, I couldn't quite understand that. Please try rephrasing or use one of the quick reply buttons below for common questions.";
    }

    // Add message to chat
    function addMessage(sender, text) {
      const msgDiv = document.createElement('div');
      msgDiv.className = sender === 'user' ? 'msg-user' : 'msg-ai';
      
      // Use placeholder images that will always load
      const aiAvatar = `<img class="avatar" src="https://placehold.co/30x30/005A9C/FFFFFF?text=AI" alt="AI Avatar">`;
      const userAvatar = `<img class="avatar" src="https://placehold.co/30x30/777777/FFFFFF?text=U" alt="User Avatar">`;

      msgDiv.innerHTML = `${sender === 'ai' ? aiAvatar : ''}<div class="msg-bubble">${text}</div>${sender === 'user' ? userAvatar : ''}`;
      chatMessages.appendChild(msgDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Send message function
    function sendMessage(message) {
      const trimmedMessage = message.trim();
      if (!trimmedMessage) return;
      
      addMessage('user', trimmedMessage);
      
      // Show a "Typing..." indicator
      const typingIndicator = document.createElement('div');
      typingIndicator.className = 'msg-ai';
      typingIndicator.innerHTML = `<img class="avatar" src="https://placehold.co/30x30/005A9C/FFFFFF?text=AI" alt="AI Avatar"><div class="msg-bubble">...</div>`;
      chatMessages.appendChild(typingIndicator);
      chatMessages.scrollTop = chatMessages.scrollHeight;

      setTimeout(() => {
        typingIndicator.remove(); // Remove 'Typing...' indicator
        addMessage('ai', getAIResponse(trimmedMessage));
      }, 800);
    }

    // Event Listeners for Send button & Enter key
    chatSend.addEventListener('click', () => {
      sendMessage(chatInput.value);
      chatInput.value = '';
      chatInput.focus();
    });

    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendMessage(chatInput.value);
        chatInput.value = '';
      }
    });

    // Event Listeners for Quick buttons
    quickBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        sendMessage(btn.dataset.msg);
        chatInput.focus();
      });
    });
    </script>
</body>
</html>
